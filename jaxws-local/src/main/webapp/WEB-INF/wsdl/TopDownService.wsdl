<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
	xmlns:tns="http://www.example.org/ServiceTypes" xmlns:tns1="http://topdown.ws.example.com/TopDownService/"
	xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
	xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" name="TopDownService"
	targetNamespace="http://topdown.ws.example.com/TopDownService/">

	<wsdl:types>
		<schema xmlns="http://www.w3.org/2001/XMLSchema" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
			xmlns:tns="http://www.example.org/ServiceTypes" targetNamespace="http://www.example.org/ServiceTypes"
			xmlns:ref="http://ws-i.org/profiles/basic/1.1/xsd">

			<xsd:import namespace="http://ws-i.org/profiles/basic/1.1/xsd"
				schemaLocation="swaref.xsd"></xsd:import>
			<!-- schemaLocation="http://ws-i.org/profiles/basic/1.1/swaref.xsd"/> -->
			<xsd:element name="resizeImageRequest">
				<xsd:complexType>
					<xsd:sequence>
						<xsd:element name="targetHeight" type="xsd:int" />
						<xsd:element name="targetWidth" type="xsd:int" />
					</xsd:sequence>
				</xsd:complexType>
			</xsd:element>
			<xsd:element name="downloadImage">
				<xsd:complexType>
					<xsd:sequence>
						<xsd:element name="in" type="xsd:string" />
					</xsd:sequence>
				</xsd:complexType>
			</xsd:element>
			<xsd:element name="downloadImageResponse">
				<xsd:complexType>
					<xsd:sequence>
						<xsd:element name="out" type="ref:swaRef">
						</xsd:element> <!-- swaRef will map to a DataHandler -->
					</xsd:sequence>
				</xsd:complexType>
			</xsd:element>
			<xsd:element name="BasicInfo">
				<xsd:complexType>
					<xsd:sequence>
						<xsd:element name="firstName" type="xsd:string"></xsd:element>
						<xsd:element name="lastName" type="xsd:string"></xsd:element>
						<xsd:element name="address">
							<xsd:complexType>
								<xsd:sequence>
									<xsd:element name="addrline1" type="xsd:string"></xsd:element>
									<xsd:element name="addrline2" type="xsd:string"></xsd:element>
								</xsd:sequence>
							</xsd:complexType>
						</xsd:element>
						<xsd:element name="documentation" type="xsd:base64Binary"
							xmlns:xmime="http://www.w3.org/2005/05/xmlmime"
							xmime:expectedContentTypes="*/*" />
						<!-- generated java classes will handle it with DataHandler 
							if xmime is specified, otherwise it ll be handled with byte[] -->
					</xsd:sequence>
				</xsd:complexType>
			</xsd:element>
			<xsd:element name="registerUserResponse">
				<xsd:complexType>
					<xsd:sequence>
						<xsd:element name="out" type="xsd:string"></xsd:element>
						<xsd:element name="credentials" type="xsd:base64Binary"
							xmlns:xmime="http://www.w3.org/2005/05/xmlmime" 
							xmime:expectedContentTypes="text/xml"/>
							<!-- text/xml will map to Source.  enable-mtom will add a include to attachment -->
					</xsd:sequence>
				</xsd:complexType>
			</xsd:element>
		</schema>
	</wsdl:types>
	
	<wsdl:message name="resizeImageRequest">
		<wsdl:part element="tns:resizeImageRequest" name="parameters" />
		<wsdl:part type="xsd:base64Binary" name="file" />
	</wsdl:message>
	<wsdl:message name="resizeImageResponse">
		<wsdl:part type="xsd:base64Binary" name="fileResponse" />
	</wsdl:message>
	
	<wsdl:message name="downloadImageRequest">
		<wsdl:part element="tns:downloadImage" name="parameters" />
	</wsdl:message>
	<wsdl:message name="downloadImageResponse">
		<wsdl:part element="tns:downloadImageResponse" name="response" />
	</wsdl:message>
	
	<wsdl:message name="registerUserRequest">
		<wsdl:part name="basicInfo" element="tns:BasicInfo"></wsdl:part>
	</wsdl:message>
	<wsdl:message name="registerUserResponse">
		<wsdl:part name="parameters" element="tns:registerUserResponse"></wsdl:part>
	</wsdl:message>
	
	<wsdl:portType name="TopDownService">
		<wsdl:operation name="resizeImage">
			<wsdl:documentation>Example using MIME Attachments with jaxws:enableMIMEContext:true (allows contentType resolution)</wsdl:documentation>
			<wsdl:input name="resizeImageRequest" message="tns1:resizeImageRequest" />
			<wsdl:output name="resizeImageRespone" message="tns1:resizeImageResponse" />
		</wsdl:operation>
		<wsdl:operation name="downloadImage">
			<wsdl:documentation>Example using SOAP With Attachments (SWARef) for response</wsdl:documentation>
			<wsdl:input name="downloadImageRequest" message="tns1:downloadImageRequest" />
			<wsdl:output name="downloadImageRespone" message="tns1:downloadImageResponse" />
		</wsdl:operation>
		<wsdl:operation name="registerUser" parameterOrder="basicInfo">
			<wsdl:documentation>Example using MTOM (XOP:Include in SOAP)</wsdl:documentation>
			<wsdl:input message="tns1:registerUserRequest"></wsdl:input>
			<wsdl:output message="tns1:registerUserResponse"></wsdl:output>
		</wsdl:operation>
	</wsdl:portType>
	
	<wsdl:binding name="TopDownServiceSOAP" type="tns1:TopDownService">
		<wsdl:documentation>Binding section doc</wsdl:documentation>
		<jaxws:bindings xmlns:jaxws="http://java.sun.com/xml/ns/jaxws">
		   	 <jaxws:enableMIMEContent>true</jaxws:enableMIMEContent>
		</jaxws:bindings>
		<soap:binding style="document"
			transport="http://schemas.xmlsoap.org/soap/http" />
		<wsdl:operation name="downloadImage">
			<soap:operation
				soapAction="http://topdown.ws.example.com/TopDownService/downloadImage" />
			<wsdl:input>
				<soap:body use="literal" />
			</wsdl:input>
			<wsdl:output>
				<soap:body use="literal" />
			</wsdl:output>
		</wsdl:operation>
		<wsdl:operation name="resizeImage">
			<soap:operation
				soapAction="http://topdown.ws.example.com/TopDownService/resizeImage" />
			<wsdl:input>
				<mime:multipartRelated>
					<mime:part>
						<soap:body parts="parameters" use="literal"/>
					</mime:part>
					<mime:part>
						<!-- watch out: JAXWS-RI-> SOAP MIME, Content-ID needs to have the following format
								to work in accordance with WSI-Attachment Profile: <part-name>=somereallybignumberlikeauuid@example.com 
								otherwise it wont work in JAXWS-RI -->
						<mime:content part="file" type="image/jpeg"/>
					</mime:part>
				</mime:multipartRelated>
			</wsdl:input>
			<wsdl:output>
				<mime:multipartRelated>
					<mime:part>
						<soap:body parts="" use="literal"/> 
					</mime:part>
					<mime:part>
						<mime:content part="fileResponse" type="image/jpeg"/>
					</mime:part>
				</mime:multipartRelated>
			</wsdl:output>
		</wsdl:operation>
		<wsdl:operation name="registerUser">
			<soap:operation
				soapAction="http://topdown.ws.example.com/TopDownService/registerUser" />
			<wsdl:input>
				<soap:body use="literal" />
			</wsdl:input>
			<wsdl:output>
				<soap:body use="literal" />
			</wsdl:output>
		</wsdl:operation>
	</wsdl:binding>
	<wsdl:service name="TopDownService">
<<<<<<< HEAD
		<wsdl:port binding="tns:TopDownServiceSOAP" name="TopDownServicePort">
=======
		<wsdl:port binding="tns1:TopDownServiceSOAP" name="TopDownServiceSOAP">
>>>>>>> 0165392c4a5c5f8ee406832051bda7e640257d63
			<soap:address location="http://topdown.ws.example.com/" />
		</wsdl:port>
	</wsdl:service>
</wsdl:definitions>
